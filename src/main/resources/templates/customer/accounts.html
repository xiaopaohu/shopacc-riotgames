<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout/base}">
<body>
<div layout:fragment="content">
    <h2>Danh sách tài khoản</h2>

    <!-- Filter form (simple) -->
    <form class="row g-2 mb-3" th:action="@{/customer/accounts}" method="get">
        <div class="col-auto">
            <select name="game" class="form-select">
                <option value="">Tất cả</option>
                <option value="LOL">Liên Minh</option>
                <option value="Valorant">Valorant</option>
                <option value="TFT">ĐTCL</option>
            </select>
        </div>
        <div class="col-auto">
            <input type="text" name="q" placeholder="Tìm kiếm..." class="form-control"/>
        </div>
        <div class="col-auto">
            <button class="btn btn-outline-primary">Lọc</button>
        </div>
    </form>

    <table class="table table-striped">
        <thead>
        <tr><th>#</th><th>Tên acc</th><th>Game</th><th>Rank</th><th>Giá</th><th>Trạng thái</th><th></th></tr>
        </thead>
        <tbody>
        <tr th:each="acc : ${accounts}">
            <td th:text="${acc.accountId}">1</td>
            <td th:text="${acc.accountName}">DragonSlayer99</td>
            <td th:text="${acc.gameType}">LOL</td>
            <td th:text="${acc.rank}">Platinum</td>
            <td th:text="${#numbers.formatDecimal(acc.price,0,'COMMA')}">500.000</td>
            <td>
                <span th:if="${acc.sold}" class="badge bg-danger">Đã bán</span>
                <span th:unless="${acc.sold}" class="badge bg-success">Còn bán</span>
            </td>
            <td>
                <a class="btn btn-sm btn-primary" th:href="@{/customer/accounts/detail/{id}(id=${acc.accountId})}">Chi tiết</a>
                <button class="btn btn-sm btn-success" sec:authorize="hasRole('CUSTOMER')">Mua</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
